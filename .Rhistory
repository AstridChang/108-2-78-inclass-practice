}
sink("report.txt")
Sys.getenv()
Sys.getlocale()
readr::locale()
sessionInfo()
sink()
print(file.path(getwd(),"report.txt"))
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite)
fromJSON("https://www.dropbox.com/s/uday7x99k9q9sxm/course.json?dl=1", simplifyDataFrame = T) -> course
pi <- c(3,1,4,1,5,9,2,6,5,3,5)
print(pi)
gift <- pi
# gift
gift <- pi
gift[[8]]
# gift
gift <- pi
gift[[8]]
gift
gift <- pi
gift[[8]]
gift <- pi
gift[[8]]
gift
gift <- pi
gift$pi[[8]]
knitr::opts_chunk$set(echo = F, eval=F)
library(lubridate); library(jsonlite); library(readr)
taiwan_time <- "2019-04-12 12:55:30"
oslo_time <- "18.11.2018 15:33:02"
knitr::opts_chunk$set(echo = F, eval=F)
library(lubridate); library(jsonlite); library(readr)
taiwan_time <- "Ë•øÂ?2019Âπ???2??12Èª?5??0Áß?
oslo_time <- "18.11.2018 15:33:02"
storage_fiveReceipts <- as.integer(fiveReceipts)
levels_fiveReceipts <- levels(fiveReceipts)
source("https://www.dropbox.com/s/bvs0m4oxw7yaqxw/108-2-hw1-3.R?dl=1")
fiveReceipts <- .randomReceipts(n=5)
levels_fiveReceipts <- levels(fiveReceipts)
levels_fiveReceipts
storage_fiveReceipts <- as.integer(fiveReceipts)
storage_fiveReceipts
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
twoNames <- "?â‰∫∫?´‰?ÊÆµÂ?Ôºå‰?‰πüÊ??â‰∫∫?´‰?ÊÆµÂ?ÂºüÔ??ÄÂ∏?..."
str_extract_all(twoNames, "ÊÆ??Ñ|?ÑÂ?)")
twoNames <- "?â‰∫∫?´‰?ÊÆµÂ?Ôºå‰?‰πüÊ??â‰∫∫?´‰?ÊÆµÂ?ÂºüÔ??ÄÂ∏?..."
back_regex <- function(rx)str_view_all(look("(?<=twoNames")`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`")
back_regex <- function(rx)str_view_all(look("(?<=twoNames"`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`")
back_regex <- function(rx)str_view_all(look("(?<=twoNames"),"ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?")
# back_regex
pattern <- paste0("ÊÆ??Ñ|?ÑÂ?)",back_regex)
back_regex <- function(rx)str_view_all(look("(?<=twoNames"),"ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?")
# back_regex
View(back_regex)
back_regex <- function(rx)str_view_all(look("(?<=twoNames"),"`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`")
# back_regex
View(back_regex)
back_regex <- function(rx)str_view_all(look("(?<=twoNames"),"`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`")
# back_regex
View(back_regex)
pattern <- paste0("ÊÆ??Ñ|?ÑÂ?)",back_regex)
twoNames <- "?â‰∫∫?´‰?ÊÆµÂ?Ôºå‰?‰πüÊ??â‰∫∫?´‰?ÊÆµÂ?ÂºüÔ??ÄÂ∏?..."
str_extract_all(twoNames, "ÊÆ??Ñ|?ÑÂ?)")
back_regex <- function(rx)str_view_all(look("(?<=twoNames")`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`)
back_regex <- function(rx)str_view_all(look("(?<=twoNames)`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`")
# back_regex
back_regex <- function(rx)str_view_all(look("(?<=twoNames)ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?")
# back_regex
back_regex <- function(rx)str_view_all(look("(?<=twoNames)`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`",rx)
# back_regex
back_regex <- function(rx)str_view_all(look("(?<=twoNames)ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?",rx)
# back_regex
back_regex <- function(rx)str_view_all("(?<=twoNames)ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?",rx)
# back_regex
pattern <- paste0("ÊÆ??Ñ|?ÑÂ?)",back_regex)
pattern <- paste0("ÊÆ??Ñ|?ÑÂ?)",back_regex)
back_regex <- function(rx)str_view_all("(?<=twoNames)ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?",rx)
# back_regex
View(back_regex)
back_regex <- function(rx)str_view_all("(?<=twoNames)`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`",rx)
# back_regex
back_regex <- function(rx)str_view_all("(?<=twoNames)`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`",rx)
View(back_regex)
twoNames <- "?â‰∫∫?´‰?ÊÆµÂ?Ôºå‰?‰πüÊ??â‰∫∫?´‰?ÊÆµÂ?ÂºüÔ??ÄÂ∏?..."
str_extract_all(twoNames, "ÊÆ??Ñ|?ÑÂ?)")
back_regex <- function(rx)str_view_all("(?<=twoNames)`ÂæåÈù¢?∞Â?‰∏çËÉΩ?âÂ?`",rx)
# back_regex
pattern <- paste0("ÊÆ??Ñ|?ÑÂ?)",back_regex)
knitr::opts_chunk$set(echo = TRUE)
Sys.getlocale("LC_TIME")
lubridate::ymd(
c("Ê∞ëÂ?108Âπ?2????,"Ê∞ëÂ?98Âπ?0????)
)
Sys.getlocale("LC_TIME")
lubridate::ymd(
c("Ê∞ëÂ?108Âπ?2????,"Ê∞ëÂ?98Âπ?0????)
)
Sys.getlocale("LC_TIME")
lubridate::ymd(
c("Ê∞ëÂ?108Âπ?2????,"Ê∞ëÂ?98Âπ?0????)
)
pattern <- paste0("ÊÆ??Ñ|?ÑÂ?)",back_regex)
jsonlite::fromJSON("https://www.dropbox.com/s/kv0xa0spa6q5l7q/semiGodsSemiDevils.json?dl=1") -> semiGodsSemiDevils
View(semiGodsSemiDevils)
View(semiGodsSemiDevils)
View(semiGodsSemiDevils[[5]][[1]])
jsonlite::fromJSON("https://www.dropbox.com/s/es19f62rijrd8i7/studentHeight.json?dl=1") -> studentHeights
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
jsonlite::fromJSON("https://www.dropbox.com/s/es19f62rijrd8i7/studentHeight.json?dl=1") -> studentHeights
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
levels(tpe_highSchools)
tpe_highSchools <- factor(
tpe_highSchools, levels=c("?∫Â?Â∏ÇÁ?Á¨¨‰?Â•≥‰∏≠","?∞Â?Â∏ÇÁ?Á¨¨‰?Â•≥Â?È´òÁ?‰∏≠Â≠∏","‰∏≠Â±±Â•≥‰∏≠","‰∏≠Â±±Â•≥È?", "?∞Â?Â∏ÇÁ?‰∏≠Â±±Â•≥‰∏≠", "?∫Â?Â∏ÇÁ?‰∏≠Â±±Â•≥Â?È´òÁ?‰∏≠Â≠∏","?ãÁ??øÂ§ß?Ñ‰∏≠", "?ãÁ??øÊ≤ªÂ§ßÂ≠∏?ÑÂ±¨È´òÁ?‰∏≠Â≠∏")
)
# tpe_highSchools
tpe_highSchools <-
factor(tpe_highSchools,
levels=c(levels(tpe_highSchools),"?ó‰?Â•?)
)
((length(tpe_highSchools)+1):(length(tpe_highSchools)+10)) -> loc_append
tpe_highSchools[loc_append] <- "?ó‰?Â•?
# tpe_highSchools
regex_hs1st <- "[?∫Âè∞]??óÂ??Á´?Á¨?‰∏ÄÂ•≥Â??È´?Á¥?‰∏?Â≠?"
# regex_hs1st
check_regexRestriction("?∫Âè∞?óÂ?Á´ãÁ¨¨‰∏ÄÂ•≥Â?È´òÁ?‰∏≠Â≠∏",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"?ó‰?Â•?) -> levels(tpe_highSchools)
levels(tpe_highSchools)
regex_hsTitle <-
"[È´òÁ?‰∏≠Â≠∏]+$"
# regex_hsTitle
check_regexRestriction("È´òÁ?‰∏≠Â≠∏",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
data228$Ê™îË? %>%
str_split("/") -> split_docCode
map(split_docCode, ~.x[[1]]) %>%
unlist() %>%
factor() -> data228$?®Â??çÁ∑®??map(split_docCode, ~.x[[2]]) %>%
unlist() %>%
as.integer()-> data228$Âπ?# data228[c("?®Â??çÁ∑®??,"Âπ?)]
map(split_docCode, ~.x[[1]]) %>%
unlist() %>%
factor() -> data228$?®Â??çÁ∑®??map(split_docCode, ~.x[[2]]) %>%
unlist() %>%
as.integer()-> data228$Âπ?data228[c("?®Â??çÁ∑®??,"Âπ?)]
victims %>%
map(~data228$Ê™îË?[(data228$?ã‰∫∫?çÁ®±==.x & !is.na(data228$?ã‰∫∫?çÁ®±))]) ->
list_docByVictim
(data228$?ÑË®ª=="Ë°®Â??çÁ®±:?∫ÁÅ£?Å‰?‰∫åÂÖ´‰∫ãË?Ê≠???äÊ≠ª‰∫°‰∫∫?ØÂ???) ->
pick_document
data228$Ê™îË?[pick_document] %>%
unique() ->
doc_number
(data228$Ê™îË?==doc_number) ->
pick_document
data228$?ã‰∫∫?çÁ®±[pick_document] %>%
unique() -> victims
# victims
victims %>%
map(~data228$Ê™îË?[(data228$?ã‰∫∫?çÁ®±==.x & !is.na(data228$?ã‰∫∫?çÁ®±))]) ->
list_docByVictim
list_docByVictim %>%
map(
~ length(unique(.x))
) %>%
unlist() -> documentCount_eachVictim
names(documentCount_eachVictim) <- victims
sort(documentCount_eachVictim, decreasing = T) -> documentCount_eachVictim
# documentCount_eachVictim
documentCount_eachVictim
courseStructure$?â‰øÆÁ≥ªÁ? %>%
str_extract_all(
"[^?Å]+Á≥ª[?∏Ê?Â≠∏Ë≤°Á∂ìÁ?]*[1-9]"
) %>%
unlist() %>%
unique() -> majorGradeCombos
jsonlite::fromJSON("https://www.dropbox.com/s/7myzzdnoor21hye/courseStructure2.json?dl=1") -> courseStructure
source("https://www.dropbox.com/s/pc8qg2phs3ypcr8/midterm108_2.R?dl=1", encoding="UTF-8")
courseStructure$?â‰øÆÁ≥ªÁ? %>%
str_extract_all(
"[^?Å]+Á≥ª[?∏Ê?Â≠∏Ë≤°Á∂ìÁ?]*[1-9]"
) %>%
unlist() %>%
unique() -> majorGradeCombos
majorGradeCombos
(courseStructure$Â≠∏Âπ¥ == "103" &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, "Á∂ìÊ?Á≥?")
) -> pick_courses
courseStructure$ÁßëÁõÆ?çÁ®±[pick_courses] %>%
unique() -> econ101junior
# econ101junior
(courseStructure$Â≠∏Âπ¥ == "103" &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, "Á∂ìÊ?Á≥?")
) -> pick_courses
courseStructure$ÁßëÁõÆ?çÁ®±[pick_courses] %>%
unique() -> econ101junior
econ101junior
grades <- 1:4
grades %>%
map(
~(courseStructure$Â≠∏Âπ¥==(entranceYear+.x-1) &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, paste0(major,.x)))
)  %>%
map(
~unique(courseStructure$ÁßëÁõÆ?çÁ®±[.x])
) -> coursesOffered
# coursesOffered
grades <- 1:4
grades %>%
map(
~(courseStructure$Â≠∏Âπ¥==(entranceYear+.x-1) &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, paste0(major,.x)))
)  %>%
map(
~unique(courseStructure$ÁßëÁõÆ?çÁ®±[.x])
) -> coursesOffered
coursesOffered
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
levels(tpe_highSchools)
tpe_highSchools <- factor(
tpe_highSchools, levels=c("?∫Â?Â∏ÇÁ?Á¨¨‰?Â•≥‰∏≠","?∞Â?Â∏ÇÁ?Á¨¨‰?Â•≥Â?È´òÁ?‰∏≠Â≠∏","‰∏≠Â±±Â•≥‰∏≠","‰∏≠Â±±Â•≥È?", "?∞Â?Â∏ÇÁ?‰∏≠Â±±Â•≥‰∏≠", "?∫Â?Â∏ÇÁ?‰∏≠Â±±Â•≥Â?È´òÁ?‰∏≠Â≠∏","?ãÁ??øÂ§ß?Ñ‰∏≠", "?ãÁ??øÊ≤ªÂ§ßÂ≠∏?ÑÂ±¨È´òÁ?‰∏≠Â≠∏")
)
# tpe_highSchools
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
factor(tpe_highSchools,
levels = c("?∫Â?Â∏ÇÁ?Á¨¨‰?Â•≥‰∏≠","?∞Â?Â∏ÇÁ?Á¨¨‰?Â•≥Â?È´òÁ?‰∏≠Â≠∏","‰∏≠Â±±Â•≥‰∏≠","‰∏≠Â±±Â•≥È?","?∞Â?Â∏ÇÁ?‰∏≠Â±±Â•≥‰∏≠","?∫Â?Â∏ÇÁ?‰∏≠Â±±Â•≥Â?È´òÁ?‰∏≠Â≠∏","?ãÁ??øÂ§ß?Ñ‰∏≠","?ãÁ??øÊ≤ªÂ§ßÂ≠∏?ÑÂ±¨È´òÁ?‰∏≠Â≠∏")) -> tpe_highSchools
tpe_highSchools
"?ó‰?Â•? -> levels(tpe_highSchools)[[9]]
"?ó‰?Â•? -> levels(tpe_highSchools)[[9]]
rep("?ó‰?Â•?,10) -> tpe_highSchools[680:689]
tpe_highSchools
levels(tpe_highSchools)
tpe_highSchools <-
factor(tpe_highSchools,
levels=c(levels(tpe_highSchools),"?ó‰?Â•?)
)
tpe_highSchools[c(680:689)] <- "?ó‰?Â•?
levels(tpe_highSchools)
tpe_highSchools <-
factor(tpe_highSchools,
levels=c(levels(tpe_highSchools),"?ó‰?Â•?)
)
levels(tpe_highSchools)
tpe_highSchools <- factor(
tpe_highSchools, levels=c("?∫Â?Â∏ÇÁ?Á¨¨‰?Â•≥‰∏≠","?∞Â?Â∏ÇÁ?Á¨¨‰?Â•≥Â?È´òÁ?‰∏≠Â≠∏","‰∏≠Â±±Â•≥‰∏≠","‰∏≠Â±±Â•≥È?", "?∞Â?Â∏ÇÁ?‰∏≠Â±±Â•≥‰∏≠", "?∫Â?Â∏ÇÁ?‰∏≠Â±±Â•≥Â?È´òÁ?‰∏≠Â≠∏","?ãÁ??øÂ§ß?Ñ‰∏≠", "?ãÁ??øÊ≤ªÂ§ßÂ≠∏?ÑÂ±¨È´òÁ?‰∏≠Â≠∏")
)
# tpe_highSchools
levels(tpe_highSchools)
tpe_highSchools <-
factor(tpe_highSchools,
levels=c(levels(tpe_highSchools),"?ó‰?Â•?)
)
levels(tpe_highSchools)
((length(tpe_highSchools)+1):(length(tpe_highSchools)+10)) -> loc_append
tpe_highSchools[loc_append] <- "?ó‰?Â•?
tpe_highSchools[c(680:689)] <- "?ó‰?Â•?
tpe_highSchools[seq(680,689, by=1)] <- "?ó‰?Â•?
# tpe_highSchools
"[?∫Âè∞]?óÂ?Á´ãÁ¨¨‰∏ÄÂ•≥Â?È´òÁ?‰∏≠Â≠∏"
"?ó‰?Â•? -> levels(tpe_highSchools)[[9]]
rep("?ó‰?Â•?,10) -> tpe_highSchools[680:689]
tpe_highSchools
regex_hs1st <- "(?∫|????óÂ??Á´?Á¨?‰∏ÄÂ•≥Â??È´?Á¥?‰∏?Â≠?"
regex_hs1st
regex_hs1st
levels(tpe_highSchools)
regex_hs1st <- "[?∫Âè∞]??óÂ??Á´?Á¨?‰∏ÄÂ•≥Â??È´?Á¥?‰∏?Â≠?"
# regex_hs1st
check_regexRestriction("?∫Âè∞?óÂ?Á´ãÁ¨¨‰∏ÄÂ•≥Â?È´òÁ?‰∏≠Â≠∏",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"?ó‰?Â•?) -> levels(tpe_highSchools)
levels(tpe_highSchools)
regex_hsTitle <-
"[È´òÁ?‰∏≠Â≠∏]+$"
# regex_hsTitle
regex_hsTitle <-
"[È´òÁ?‰∏≠Â≠∏]+$"
regex_hsTitle
check_regexRestriction("È´òÁ?‰∏≠Â≠∏",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
regex_hsTitle <-
"[È´òÁ?‰∏≠Â≠∏]+$"
regex_hsTitle
check_regexRestriction("È´òÁ?‰∏≠Â≠∏",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
check_regexRestriction("È´òÁ?‰∏≠Â≠∏",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
data228$Ê™îË?[[1]]
data228$Ê™îË? %>%
str_split("/") -> split_docCode
data228$`Ê™îË?` %>%
str_split("/") -> split_docCode
map(split_docCode, ~.x[[1]]) %>%
unlist() %>%
factor() -> data228$`?®Â??çÁ∑®?ü`
map(split_docCode, ~.x[[2]]) %>%
unlist() %>%
as.integer()-> data228$Âπ?data228[c("?®Â??çÁ∑®??,"Âπ?)]
data228 <- data.frame(data228,
`?®Â??çÁ∑®?ü`=factor(str_extract(data228$`Ê™îË?`,"(?<!/)[:alnum:]+(?=/)")),
`Âπ¥`=as.integer(str_extract(data228$`Ê™îË?`,"(?<=/00)[:digit:]+(?=/)")))
data228[c("?®Â??çÁ∑®??,"Âπ?)]
data228[c("?®Â??çÁ∑®??,"Âπ?)]
(data228$?ÑË®ª=="Ë°®Â??çÁ®±:?∫ÁÅ£?Å‰?‰∫åÂÖ´‰∫ãË?Ê≠???äÊ≠ª‰∫°‰∫∫?ØÂ???) ->
pick_document # Ë¶?‰∏çË?
data228$Ê™îË?[pick_document] %>%
unique() ->
doc_number
(data228$Ê™îË?==doc_number) ->
pick_document # Ë¶?‰∏çË?
data228$?ã‰∫∫?çÁ®±[pick_document] %>%
unique() -> victims
# victims
(data228$?ÑË®ª=="Ë°®Â??çÁ®±:?∫ÁÅ£?Å‰?‰∫åÂÖ´‰∫ãË?Ê≠???äÊ≠ª‰∫°‰∫∫?ØÂ???) ->
pick_document # Ë¶?‰∏çË?
data228$Ê™îË?[pick_document] %>%
unique() ->
doc_number
(data228$Ê™îË?==doc_number) ->
pick_document # Ë¶?‰∏çË?
data228$?ã‰∫∫?çÁ®±[pick_document] %>%
unique() -> victims
victims
length(victims)
# remove na
pick_notNa <- !is.na(data228$?ã‰∫∫?çÁ®±)
map(data228, ~.x[ pick_notNa]) -> data228
victims[[1]]
(data228$?ã‰∫∫?çÁ®±==victims[[1]]) -> pick_victim1 # Ë¶?‰∏çË? ?≥Â?Âø?(data228$?ã‰∫∫?çÁ®±==victims[[2]]) -> pick_victim2
map(victims, ~(data228$?ã‰∫∫?çÁ®±==.x)) -> pick_victims
length(unique(data228$Ê™îË?[pick_victims[[1]]])) # equivalent to  sum(pick_victims[[1]])
length(unique(data228$Ê™îË?[pick_victims[[2]]]))
length(unique(data228$Ê™îË?[pick_victims[[3]]]))
map(pick_victims, ~length(unique(data228$Ê™îË?[.x]))) -> list_counts
unlist(list_counts) -> documentCount_eachVictim
names(documentCount_eachVictim) <- victims
head(documentCount_eachVictim)
sort(documentCount_eachVictim, decreasing = T) -> documentCount_eachVictim
head(documentCount_eachVictim)
documentCount_eachVictim <-sort(c(table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?≥È?Á∑?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?≥Ê?Â¶?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?éÁ?Â≥?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?éÁ?Êº?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?ÆÊ???)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?ó‰?")),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?±È?Â±?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?ΩÊ???)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"Ê∂ÇÂ???)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"ÂºµÂ?‰ª?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"Ë®±Èå´Ë¨?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?≥Âøª")),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?≥ËÉΩ??)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?≥Ê?Ê≥?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?æÈ≥≥È≥?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"ÊπØÂæ∑Á´?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"ÈªÉ‰?Á¥?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"ÈªÉÂ™Ω??)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?âÁ???)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"ÂªñÈÄ≤‰?")),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"ÊΩòÊú®??)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?ßÈ?Ê¨?)),
table(str_subset(data228$`?ã‰∫∫?çÁ®±`,"?áÊÜ≤Á´?))),
decreasing = T)
documentCount_eachVictim
# remove na
pick_notNa <- !is.na(data228$?ã‰∫∫?çÁ®±)
map(data228, ~.x[ pick_notNa]) -> data228
victims[[1]]
(data228$?ã‰∫∫?çÁ®±==victims[[1]]) -> pick_victim1 # Ë¶?‰∏çË? ?≥Â?Âø?(data228$?ã‰∫∫?çÁ®±==victims[[2]]) -> pick_victim2
map(victims, ~(data228$?ã‰∫∫?çÁ®±==.x)) -> pick_victims
length(unique(data228$Ê™îË?[pick_victims[[1]]])) # equivalent to  sum(pick_victims[[1]])
length(unique(data228$Ê™îË?[pick_victims[[2]]]))
length(unique(data228$Ê™îË?[pick_victims[[3]]]))
map(pick_victims, ~length(unique(data228$Ê™îË?[.x]))) -> list_counts
unlist(list_counts) -> documentCount_eachVictim
names(documentCount_eachVictim) <- victims
head(documentCount_eachVictim)
sort(documentCount_eachVictim, decreasing = T) -> documentCount_eachVictim
head(documentCount_eachVictim)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
jsonlite::fromJSON("https://www.dropbox.com/s/7myzzdnoor21hye/courseStructure2.json?dl=1") -> courseStructure
source("https://www.dropbox.com/s/pc8qg2phs3ypcr8/midterm108_2.R?dl=1", encoding="UTF-8")
View(courseStructure)
regex_wrong <- "[:graph:]+Á≥ª[?∏Ê?Â≠∏Ë≤°Á∂ìÁ?]*[1-9]"
View(regex_wrong)
regex1 <- "[^?Å]+Á≥ª[?∏Ê?Â≠∏Ë≤°Á∂ìÁ?]*[1-9]"
# ‰∏≠Êó•?ìÂ??ÉstripÊ®°Á?Ôº?[\u4E00-\u9FFF]
regex1 <- "[\u4E00-\u9FFF]+Á≥ª[?∏Ê?Â≠∏Ë≤°Á∂ìÁ?]*[0-9]"
regex1 <- "[\u4E00-\u9FFF]+Á≥??∏Ê?ÁµÑ|Ê≥ïÂ≠∏ÁµÑ|Ë≤°Á?Ê≥ïÁ?)?[0-9]"
regex_wrong <- "[:graph:]+Á≥ª[?∏Ê?Â≠∏Ë≤°Á∂ìÁ?]*[1-9]"
regex1 <- "[^?Å]+Á≥ª[?∏Ê?Â≠∏Ë≤°Á∂ìÁ?]*[1-9]"
str_extract_all(
courseStructure$?â‰øÆÁ≥ªÁ?,
regex1
) %>% # ÂæóÂà∞list
unlist() %>% # ÂæóÂà∞vector
unique() -> # ‰∏çÈ?Ë¶?majorGradeCombos
majorGradeCombos
(courseStructure$Â≠∏Âπ¥ == "103" &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, "Á∂ìÊ?Á≥?")
) -> pick_courses
courseStructure$ÁßëÁõÆ?çÁ®±[pick_courses] %>%
unique() -> econ101junior
# econ101junior
(courseStructure$Â≠∏Âπ¥ == "103" &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, "Á∂ìÊ?Á≥?")
) -> pick_courses
courseStructure$ÁßëÁõÆ?çÁ®±[pick_courses] %>%
unique() -> econ101junior
econ101junior
list(
`102?•Â≠∏?ëË?Á≥?Âπ¥Á?`= # 102Â≠∏Âπ¥, ?ëË?Á≥?
`102?•Â≠∏?ëË?Á≥?Âπ¥Á?`= # 103Â≠∏Âπ¥, ?ëË?Á≥?
list(
`entranceYear?•Â≠∏major1Âπ¥Á?`= # entranceYear+1-1Â≠∏Âπ¥, major1
`entranceYear?•Â≠∏major2Âπ¥Á?`= # entranceYear+2-1Â≠∏Âπ¥, major2
# entranceYear+1-1Â≠∏Âπ¥, major1
schoolYear <- entranceYear+1-1
pick_schoolYear <- courseStructure$Â≠∏Âπ¥==as.character(schoolYear)
pick_majorGrade <- str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, paste0(major,1))
courseStructure$ÁßëÁõÆ?çÁ®±[pick_schoolYear & pick_majorGrade] %>%
unique() -> result1
# entranceYear+2-1Â≠∏Âπ¥, major2
schoolYear <- entranceYear+2-1
pick_schoolYear <- courseStructure$Â≠∏Âπ¥==as.character(schoolYear)
pick_majorGrade <- str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, paste0(major,2))
courseStructure$ÁßëÁõÆ?çÁ®±[pick_schoolYear & pick_majorGrade] %>%
unique() -> result2
# entranceYear+3-1Â≠∏Âπ¥, major3
schoolYear <- entranceYear+3-1
pick_schoolYear <- courseStructure$Â≠∏Âπ¥==as.character(schoolYear)
pick_majorGrade <- str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, paste0(major,3))
courseStructure$ÁßëÁõÆ?çÁ®±[pick_schoolYear & pick_majorGrade] %>%
unique() -> result3
# entranceYear+4-1Â≠∏Âπ¥, major4
schoolYear <- entranceYear+4-1
pick_schoolYear <- courseStructure$Â≠∏Âπ¥==as.character(schoolYear)
pick_majorGrade <- str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, paste0(major,4))
courseStructure$ÁßëÁõÆ?çÁ®±[pick_schoolYear & pick_majorGrade] %>%
unique() -> result4
list(
`entranceYear?•Â≠∏major1Âπ¥Á?`=result1, # entranceYear+1-1Â≠∏Âπ¥, major1
`entranceYear?•Â≠∏major2Âπ¥Á?`=result2, # entranceYear+2-1Â≠∏Âπ¥, major2
`entranceYear?•Â≠∏major3Âπ¥Á?`=result3, # entranceYear+3-1Â≠∏Âπ¥, major3
`entranceYear?•Â≠∏major4Âπ¥Á?`=result4 # entranceYear+4-1Â≠∏Âπ¥, major4
) ->  coursesOffered
grades <- c(1,2,3,4)
# entranceYear+1-1Â≠∏Âπ¥, major1
unique(courseStructure$ÁßëÁõÆ?çÁ®±[
courseStructure$Â≠∏Âπ¥==as.character(entranceYear+grades[[1]]-1) &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?,
paste0(major,grades[[1]]))
]) -> result1
map(grades,
~unique(courseStructure$ÁßëÁõÆ?çÁ®±[
courseStructure$Â≠∏Âπ¥==as.character(entranceYear+.x-1) &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?,
paste0(major,.x))
])) -> coursesOffered
grades <- 1:4
grades %>%
map(
~(courseStructure$Â≠∏Âπ¥==(entranceYear+.x-1) &
str_detect(courseStructure$?â‰øÆÁ≥ªÁ?, paste0(major,.x)))
)  %>%
map(
~unique(courseStructure$ÁßëÁõÆ?çÁ®±[.x])
) -> coursesOffered
# coursesOffered
q()
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
install.packages("lubid")
install.packages("jsonlite")
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
summary(cars)
